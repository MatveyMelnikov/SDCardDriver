ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"sdcard_driver.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.global	sd_status
  18              		.section	.bss.sd_status,"aw",%nobits
  19              		.align	2
  22              	sd_status:
  23 0000 000000   		.space	3
  24              		.section	.text.sd_card_power_on,"ax",%progbits
  25              		.align	1
  26              		.global	sd_card_power_on
  27              		.syntax unified
  28              		.thumb
  29              		.thumb_func
  31              	sd_card_power_on:
  32              	.LFB65:
  33              		.file 1 "External/SDCard_Driver/Src/sdcard_driver.c"
   1:External/SDCard_Driver/Src/sdcard_driver.c **** #include "sdcard_driver.h"
   2:External/SDCard_Driver/Src/sdcard_driver.c **** #include <string.h>
   3:External/SDCard_Driver/Src/sdcard_driver.c **** #include "crc-buffer.h"
   4:External/SDCard_Driver/Src/sdcard_driver.c **** 
   5:External/SDCard_Driver/Src/sdcard_driver.c **** sd_card_status sd_status = { 0 };
   6:External/SDCard_Driver/Src/sdcard_driver.c **** 
   7:External/SDCard_Driver/Src/sdcard_driver.c **** // To IDLE state
   8:External/SDCard_Driver/Src/sdcard_driver.c **** void sd_card_power_on(SPI_HandleTypeDef *hspi)
   9:External/SDCard_Driver/Src/sdcard_driver.c **** {
  34              		.loc 1 9 1
  35              		.cfi_startproc
  36              		@ args = 0, pretend = 0, frame = 16
  37              		@ frame_needed = 1, uses_anonymous_args = 0
  38 0000 80B5     		push	{r7, lr}
  39              	.LCFI0:
  40              		.cfi_def_cfa_offset 8
  41              		.cfi_offset 7, -8
  42              		.cfi_offset 14, -4
  43 0002 84B0     		sub	sp, sp, #16
  44              	.LCFI1:
  45              		.cfi_def_cfa_offset 24
  46 0004 00AF     		add	r7, sp, #0
  47              	.LCFI2:
  48              		.cfi_def_cfa_register 7
  49 0006 7860     		str	r0, [r7, #4]
  10:External/SDCard_Driver/Src/sdcard_driver.c ****   uint8_t dummy_data = 0xff;
  50              		.loc 1 10 11
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 2


  51 0008 FF23     		movs	r3, #255
  52 000a BB73     		strb	r3, [r7, #14]
  11:External/SDCard_Driver/Src/sdcard_driver.c **** 
  12:External/SDCard_Driver/Src/sdcard_driver.c ****   DISELECT_SD();
  53              		.loc 1 12 3
  54 000c 0122     		movs	r2, #1
  55 000e 4FF48051 		mov	r1, #4096
  56 0012 0F48     		ldr	r0, .L4
  57 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
  58              	.LBB2:
  13:External/SDCard_Driver/Src/sdcard_driver.c **** 
  14:External/SDCard_Driver/Src/sdcard_driver.c ****   // Clock occurs only during transmission
  15:External/SDCard_Driver/Src/sdcard_driver.c ****   for (uint8_t i = 0; i < 10; i++) // Need at least 74 ticks
  59              		.loc 1 15 16
  60 0018 0023     		movs	r3, #0
  61 001a FB73     		strb	r3, [r7, #15]
  62              		.loc 1 15 3
  63 001c 0AE0     		b	.L2
  64              	.L3:
  16:External/SDCard_Driver/Src/sdcard_driver.c ****     HAL_SPI_Transmit(hspi, &dummy_data, 1, 500);
  65              		.loc 1 16 5 discriminator 3
  66 001e 07F10E01 		add	r1, r7, #14
  67 0022 4FF4FA73 		mov	r3, #500
  68 0026 0122     		movs	r2, #1
  69 0028 7868     		ldr	r0, [r7, #4]
  70 002a FFF7FEFF 		bl	HAL_SPI_Transmit
  15:External/SDCard_Driver/Src/sdcard_driver.c ****     HAL_SPI_Transmit(hspi, &dummy_data, 1, 500);
  71              		.loc 1 15 32 discriminator 3
  72 002e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
  73 0030 0133     		adds	r3, r3, #1
  74 0032 FB73     		strb	r3, [r7, #15]
  75              	.L2:
  15:External/SDCard_Driver/Src/sdcard_driver.c ****     HAL_SPI_Transmit(hspi, &dummy_data, 1, 500);
  76              		.loc 1 15 3 discriminator 1
  77 0034 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
  78 0036 092B     		cmp	r3, #9
  79 0038 F1D9     		bls	.L3
  80              	.LBE2:
  17:External/SDCard_Driver/Src/sdcard_driver.c **** 
  18:External/SDCard_Driver/Src/sdcard_driver.c ****   sd_card_receive_byte(hspi, &dummy_data); // Just in case, we get the result
  81              		.loc 1 18 3
  82 003a 07F10E03 		add	r3, r7, #14
  83 003e 1946     		mov	r1, r3
  84 0040 7868     		ldr	r0, [r7, #4]
  85 0042 FFF7FEFF 		bl	sd_card_receive_byte
  19:External/SDCard_Driver/Src/sdcard_driver.c **** }
  86              		.loc 1 19 1
  87 0046 00BF     		nop
  88 0048 1037     		adds	r7, r7, #16
  89              	.LCFI3:
  90              		.cfi_def_cfa_offset 8
  91 004a BD46     		mov	sp, r7
  92              	.LCFI4:
  93              		.cfi_def_cfa_register 13
  94              		@ sp needed
  95 004c 80BD     		pop	{r7, pc}
  96              	.L5:
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 3


  97 004e 00BF     		.align	2
  98              	.L4:
  99 0050 000C0140 		.word	1073810432
 100              		.cfi_endproc
 101              	.LFE65:
 103              		.section	.text.sd_card_enter_spi_mode,"ax",%progbits
 104              		.align	1
 105              		.global	sd_card_enter_spi_mode
 106              		.syntax unified
 107              		.thumb
 108              		.thumb_func
 110              	sd_card_enter_spi_mode:
 111              	.LFB66:
  20:External/SDCard_Driver/Src/sdcard_driver.c **** 
  21:External/SDCard_Driver/Src/sdcard_driver.c **** // Should be called only once after power up SD card! (?)
  22:External/SDCard_Driver/Src/sdcard_driver.c **** HAL_StatusTypeDef sd_card_enter_spi_mode(SPI_HandleTypeDef *hspi)
  23:External/SDCard_Driver/Src/sdcard_driver.c **** {
 112              		.loc 1 23 1
 113              		.cfi_startproc
 114              		@ args = 0, pretend = 0, frame = 32
 115              		@ frame_needed = 1, uses_anonymous_args = 0
 116 0000 80B5     		push	{r7, lr}
 117              	.LCFI5:
 118              		.cfi_def_cfa_offset 8
 119              		.cfi_offset 7, -8
 120              		.cfi_offset 14, -4
 121 0002 88B0     		sub	sp, sp, #32
 122              	.LCFI6:
 123              		.cfi_def_cfa_offset 40
 124 0004 00AF     		add	r7, sp, #0
 125              	.LCFI7:
 126              		.cfi_def_cfa_register 7
 127 0006 7860     		str	r0, [r7, #4]
  24:External/SDCard_Driver/Src/sdcard_driver.c ****   static bool sd_card_is_spi_mode = false;
  25:External/SDCard_Driver/Src/sdcard_driver.c ****   sd_card_command cmd0 = sd_card_get_cmd(0, 0x0);
 128              		.loc 1 25 26
 129 0008 07F11003 		add	r3, r7, #16
 130 000c 0022     		movs	r2, #0
 131 000e 0021     		movs	r1, #0
 132 0010 1846     		mov	r0, r3
 133 0012 FFF7FEFF 		bl	sd_card_get_cmd
  26:External/SDCard_Driver/Src/sdcard_driver.c ****   sd_card_r1_response cmd0_response = 0;
 134              		.loc 1 26 23
 135 0016 0023     		movs	r3, #0
 136 0018 FB73     		strb	r3, [r7, #15]
  27:External/SDCard_Driver/Src/sdcard_driver.c **** 
  28:External/SDCard_Driver/Src/sdcard_driver.c ****   if (sd_card_is_spi_mode)
 137              		.loc 1 28 7
 138 001a 284B     		ldr	r3, .L13
 139 001c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 140              		.loc 1 28 6
 141 001e 002B     		cmp	r3, #0
 142 0020 01D0     		beq	.L7
  29:External/SDCard_Driver/Src/sdcard_driver.c ****     return HAL_OK;
 143              		.loc 1 29 12
 144 0022 0023     		movs	r3, #0
 145 0024 45E0     		b	.L12
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 4


 146              	.L7:
  30:External/SDCard_Driver/Src/sdcard_driver.c **** 
  31:External/SDCard_Driver/Src/sdcard_driver.c ****   sd_card_power_on(hspi);
 147              		.loc 1 31 3
 148 0026 7868     		ldr	r0, [r7, #4]
 149 0028 FFF7FEFF 		bl	sd_card_power_on
  32:External/SDCard_Driver/Src/sdcard_driver.c **** 
  33:External/SDCard_Driver/Src/sdcard_driver.c ****   SELECT_SD();
 150              		.loc 1 33 3
 151 002c 0022     		movs	r2, #0
 152 002e 4FF48051 		mov	r1, #4096
 153 0032 2348     		ldr	r0, .L13+4
 154 0034 FFF7FEFF 		bl	HAL_GPIO_WritePin
  34:External/SDCard_Driver/Src/sdcard_driver.c **** 	HAL_StatusTypeDef status = HAL_SPI_Transmit(
 155              		.loc 1 34 29
 156 0038 07F11001 		add	r1, r7, #16
 157 003c 4FF0FF33 		mov	r3, #-1
 158 0040 0622     		movs	r2, #6
 159 0042 7868     		ldr	r0, [r7, #4]
 160 0044 FFF7FEFF 		bl	HAL_SPI_Transmit
 161 0048 0346     		mov	r3, r0
 162 004a FB77     		strb	r3, [r7, #31]
  35:External/SDCard_Driver/Src/sdcard_driver.c ****     hspi, (uint8_t*)&cmd0, 6, HAL_MAX_DELAY
  36:External/SDCard_Driver/Src/sdcard_driver.c ****   );
  37:External/SDCard_Driver/Src/sdcard_driver.c **** 	status |= sd_card_receive_byte(hspi, &cmd0_response);
 163              		.loc 1 37 12
 164 004c 07F10F03 		add	r3, r7, #15
 165 0050 1946     		mov	r1, r3
 166 0052 7868     		ldr	r0, [r7, #4]
 167 0054 FFF7FEFF 		bl	sd_card_receive_byte
 168 0058 0346     		mov	r3, r0
 169 005a 1A46     		mov	r2, r3
 170              		.loc 1 37 9
 171 005c FB7F     		ldrb	r3, [r7, #31]
 172 005e 1343     		orrs	r3, r3, r2
 173 0060 FB77     		strb	r3, [r7, #31]
  38:External/SDCard_Driver/Src/sdcard_driver.c **** 
  39:External/SDCard_Driver/Src/sdcard_driver.c ****   uint32_t tickstart = HAL_GetTick();
 174              		.loc 1 39 24
 175 0062 FFF7FEFF 		bl	HAL_GetTick
 176 0066 B861     		str	r0, [r7, #24]
 177              	.L10:
  40:External/SDCard_Driver/Src/sdcard_driver.c ****   do
  41:External/SDCard_Driver/Src/sdcard_driver.c ****   {
  42:External/SDCard_Driver/Src/sdcard_driver.c ****     status |= sd_card_receive_byte(hspi, &cmd0_response);
 178              		.loc 1 42 15
 179 0068 07F10F03 		add	r3, r7, #15
 180 006c 1946     		mov	r1, r3
 181 006e 7868     		ldr	r0, [r7, #4]
 182 0070 FFF7FEFF 		bl	sd_card_receive_byte
 183 0074 0346     		mov	r3, r0
 184 0076 1A46     		mov	r2, r3
 185              		.loc 1 42 12
 186 0078 FB7F     		ldrb	r3, [r7, #31]
 187 007a 1343     		orrs	r3, r3, r2
 188 007c FB77     		strb	r3, [r7, #31]
  43:External/SDCard_Driver/Src/sdcard_driver.c ****     if (HAL_GetTick() - tickstart > 500)
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 5


 189              		.loc 1 43 9
 190 007e FFF7FEFF 		bl	HAL_GetTick
 191 0082 0246     		mov	r2, r0
 192              		.loc 1 43 23
 193 0084 BB69     		ldr	r3, [r7, #24]
 194 0086 D31A     		subs	r3, r2, r3
 195              		.loc 1 43 8
 196 0088 B3F5FA7F 		cmp	r3, #500
 197 008c 01D9     		bls	.L9
  44:External/SDCard_Driver/Src/sdcard_driver.c ****       return HAL_TIMEOUT;
 198              		.loc 1 44 14
 199 008e 0323     		movs	r3, #3
 200 0090 0FE0     		b	.L12
 201              	.L9:
  45:External/SDCard_Driver/Src/sdcard_driver.c ****   } while (cmd0_response != IN_IDLE_STATE);
 202              		.loc 1 45 26
 203 0092 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 204              		.loc 1 45 3
 205 0094 012B     		cmp	r3, #1
 206 0096 E7D1     		bne	.L10
  46:External/SDCard_Driver/Src/sdcard_driver.c **** 
  47:External/SDCard_Driver/Src/sdcard_driver.c ****   DISELECT_SD();
 207              		.loc 1 47 3
 208 0098 0122     		movs	r2, #1
 209 009a 4FF48051 		mov	r1, #4096
 210 009e 0848     		ldr	r0, .L13+4
 211 00a0 FFF7FEFF 		bl	HAL_GPIO_WritePin
  48:External/SDCard_Driver/Src/sdcard_driver.c **** 
  49:External/SDCard_Driver/Src/sdcard_driver.c ****   if (status == HAL_OK)
 212              		.loc 1 49 6
 213 00a4 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 214 00a6 002B     		cmp	r3, #0
 215 00a8 02D1     		bne	.L11
  50:External/SDCard_Driver/Src/sdcard_driver.c ****     sd_card_is_spi_mode = true;
 216              		.loc 1 50 25
 217 00aa 044B     		ldr	r3, .L13
 218 00ac 0122     		movs	r2, #1
 219 00ae 1A70     		strb	r2, [r3]
 220              	.L11:
  51:External/SDCard_Driver/Src/sdcard_driver.c **** 
  52:External/SDCard_Driver/Src/sdcard_driver.c ****   return status;
 221              		.loc 1 52 10
 222 00b0 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 223              	.L12:
  53:External/SDCard_Driver/Src/sdcard_driver.c **** }
 224              		.loc 1 53 1 discriminator 1
 225 00b2 1846     		mov	r0, r3
 226 00b4 2037     		adds	r7, r7, #32
 227              	.LCFI8:
 228              		.cfi_def_cfa_offset 8
 229 00b6 BD46     		mov	sp, r7
 230              	.LCFI9:
 231              		.cfi_def_cfa_register 13
 232              		@ sp needed
 233 00b8 80BD     		pop	{r7, pc}
 234              	.L14:
 235 00ba 00BF     		.align	2
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 6


 236              	.L13:
 237 00bc 00000000 		.word	sd_card_is_spi_mode.0
 238 00c0 000C0140 		.word	1073810432
 239              		.cfi_endproc
 240              	.LFE66:
 242              		.section	.text.sd_card_v1_init_process,"ax",%progbits
 243              		.align	1
 244              		.global	sd_card_v1_init_process
 245              		.syntax unified
 246              		.thumb
 247              		.thumb_func
 249              	sd_card_v1_init_process:
 250              	.LFB67:
  54:External/SDCard_Driver/Src/sdcard_driver.c **** 
  55:External/SDCard_Driver/Src/sdcard_driver.c **** HAL_StatusTypeDef sd_card_v1_init_process(SPI_HandleTypeDef *hspi)
  56:External/SDCard_Driver/Src/sdcard_driver.c **** {
 251              		.loc 1 56 1
 252              		.cfi_startproc
 253              		@ args = 0, pretend = 0, frame = 56
 254              		@ frame_needed = 1, uses_anonymous_args = 0
 255 0000 80B5     		push	{r7, lr}
 256              	.LCFI10:
 257              		.cfi_def_cfa_offset 8
 258              		.cfi_offset 7, -8
 259              		.cfi_offset 14, -4
 260 0002 8EB0     		sub	sp, sp, #56
 261              	.LCFI11:
 262              		.cfi_def_cfa_offset 64
 263 0004 00AF     		add	r7, sp, #0
 264              	.LCFI12:
 265              		.cfi_def_cfa_register 7
 266 0006 7860     		str	r0, [r7, #4]
  57:External/SDCard_Driver/Src/sdcard_driver.c ****   // Reads OCR to get supported voltage
  58:External/SDCard_Driver/Src/sdcard_driver.c ****   sd_card_command cmd58 = sd_card_get_cmd(58, 0x0);
 267              		.loc 1 58 27
 268 0008 07F12803 		add	r3, r7, #40
 269 000c 0022     		movs	r2, #0
 270 000e 3A21     		movs	r1, #58
 271 0010 1846     		mov	r0, r3
 272 0012 FFF7FEFF 		bl	sd_card_get_cmd
  59:External/SDCard_Driver/Src/sdcard_driver.c ****   sd_card_command cmd55 = sd_card_get_cmd(55, 0x0);
 273              		.loc 1 59 27
 274 0016 07F12003 		add	r3, r7, #32
 275 001a 0022     		movs	r2, #0
 276 001c 3721     		movs	r1, #55
 277 001e 1846     		mov	r0, r3
 278 0020 FFF7FEFF 		bl	sd_card_get_cmd
  60:External/SDCard_Driver/Src/sdcard_driver.c ****   sd_card_command acmd41 = sd_card_get_cmd(41, 0x0);
 279              		.loc 1 60 28
 280 0024 07F11803 		add	r3, r7, #24
 281 0028 0022     		movs	r2, #0
 282 002a 2921     		movs	r1, #41
 283 002c 1846     		mov	r0, r3
 284 002e FFF7FEFF 		bl	sd_card_get_cmd
  61:External/SDCard_Driver/Src/sdcard_driver.c ****   sd_card_r3_response cmd58_response = { 0 };
 285              		.loc 1 61 23
 286 0032 07F11003 		add	r3, r7, #16
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 7


 287 0036 0022     		movs	r2, #0
 288 0038 1A60     		str	r2, [r3]
 289 003a 1A71     		strb	r2, [r3, #4]
  62:External/SDCard_Driver/Src/sdcard_driver.c ****   sd_card_r1_response cmd55_response = { 0 };
 290              		.loc 1 62 23
 291 003c 0023     		movs	r3, #0
 292 003e FB73     		strb	r3, [r7, #15]
  63:External/SDCard_Driver/Src/sdcard_driver.c **** 	sd_card_r1_response acmd41_response = { 0 };
 293              		.loc 1 63 22
 294 0040 0023     		movs	r3, #0
 295 0042 BB73     		strb	r3, [r7, #14]
  64:External/SDCard_Driver/Src/sdcard_driver.c ****   HAL_StatusTypeDef status = HAL_OK;
 296              		.loc 1 64 21
 297 0044 0023     		movs	r3, #0
 298 0046 87F83730 		strb	r3, [r7, #55]
  65:External/SDCard_Driver/Src/sdcard_driver.c **** 
  66:External/SDCard_Driver/Src/sdcard_driver.c ****   SEND_CMD(hspi, cmd58, cmd58_response, status);
 299              		.loc 1 66 3
 300 004a 0022     		movs	r2, #0
 301 004c 4FF48051 		mov	r1, #4096
 302 0050 5448     		ldr	r0, .L27
 303 0052 FFF7FEFF 		bl	HAL_GPIO_WritePin
 304 0056 07F12801 		add	r1, r7, #40
 305 005a 4FF0FF33 		mov	r3, #-1
 306 005e 0622     		movs	r2, #6
 307 0060 7868     		ldr	r0, [r7, #4]
 308 0062 FFF7FEFF 		bl	HAL_SPI_Transmit
 309 0066 0346     		mov	r3, r0
 310 0068 1A46     		mov	r2, r3
 311 006a 97F83730 		ldrb	r3, [r7, #55]
 312 006e 1343     		orrs	r3, r3, r2
 313 0070 87F83730 		strb	r3, [r7, #55]
 314 0074 07F11001 		add	r1, r7, #16
 315 0078 4FF0FF33 		mov	r3, #-1
 316 007c 0522     		movs	r2, #5
 317 007e 7868     		ldr	r0, [r7, #4]
 318 0080 FFF7FEFF 		bl	sd_card_receive_cmd_response
 319 0084 0346     		mov	r3, r0
 320 0086 1A46     		mov	r2, r3
 321 0088 97F83730 		ldrb	r3, [r7, #55]
 322 008c 1343     		orrs	r3, r3, r2
 323 008e 87F83730 		strb	r3, [r7, #55]
 324 0092 0122     		movs	r2, #1
 325 0094 4FF48051 		mov	r1, #4096
 326 0098 4248     		ldr	r0, .L27
 327 009a FFF7FEFF 		bl	HAL_GPIO_WritePin
  67:External/SDCard_Driver/Src/sdcard_driver.c **** 	
  68:External/SDCard_Driver/Src/sdcard_driver.c **** 	// Check voltage. The card must support 2.7-3.6V
  69:External/SDCard_Driver/Src/sdcard_driver.c ****   // MSB. Second byte is 23 - 16 bits of OCR
  70:External/SDCard_Driver/Src/sdcard_driver.c ****   // Third byte starts with 15 bit oof OCR
  71:External/SDCard_Driver/Src/sdcard_driver.c **** 	if (!((cmd58_response.ocr_register_content[1] & 0x1f) &&
 328              		.loc 1 71 44
 329 009e BB7C     		ldrb	r3, [r7, #18]	@ zero_extendqisi2
 330              		.loc 1 71 48
 331 00a0 03F01F03 		and	r3, r3, #31
 332              		.loc 1 71 5
 333 00a4 002B     		cmp	r3, #0
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 8


 334 00a6 03D0     		beq	.L16
  72:External/SDCard_Driver/Src/sdcard_driver.c ****     (cmd58_response.ocr_register_content[2] & 0x80)))
 335              		.loc 1 72 41 discriminator 1
 336 00a8 FB7C     		ldrb	r3, [r7, #19]	@ zero_extendqisi2
  71:External/SDCard_Driver/Src/sdcard_driver.c ****     (cmd58_response.ocr_register_content[2] & 0x80)))
 337              		.loc 1 71 56 discriminator 1
 338 00aa 5BB2     		sxtb	r3, r3
  71:External/SDCard_Driver/Src/sdcard_driver.c ****     (cmd58_response.ocr_register_content[2] & 0x80)))
 339              		.loc 1 71 6 discriminator 1
 340 00ac 002B     		cmp	r3, #0
 341 00ae 01DB     		blt	.L17
 342              	.L16:
  73:External/SDCard_Driver/Src/sdcard_driver.c ****     return HAL_ERROR;
 343              		.loc 1 73 12
 344 00b0 0123     		movs	r3, #1
 345 00b2 72E0     		b	.L24
 346              	.L17:
  74:External/SDCard_Driver/Src/sdcard_driver.c **** 
  75:External/SDCard_Driver/Src/sdcard_driver.c ****   uint32_t tickstart = HAL_GetTick();
 347              		.loc 1 75 24
 348 00b4 FFF7FEFF 		bl	HAL_GetTick
 349 00b8 3863     		str	r0, [r7, #48]
 350              	.L23:
  76:External/SDCard_Driver/Src/sdcard_driver.c **** 	while (true)
  77:External/SDCard_Driver/Src/sdcard_driver.c **** 	{
  78:External/SDCard_Driver/Src/sdcard_driver.c ****     SEND_CMD(hspi, cmd55, cmd55_response, status);
 351              		.loc 1 78 5
 352 00ba 0022     		movs	r2, #0
 353 00bc 4FF48051 		mov	r1, #4096
 354 00c0 3848     		ldr	r0, .L27
 355 00c2 FFF7FEFF 		bl	HAL_GPIO_WritePin
 356 00c6 07F12001 		add	r1, r7, #32
 357 00ca 4FF0FF33 		mov	r3, #-1
 358 00ce 0622     		movs	r2, #6
 359 00d0 7868     		ldr	r0, [r7, #4]
 360 00d2 FFF7FEFF 		bl	HAL_SPI_Transmit
 361 00d6 0346     		mov	r3, r0
 362 00d8 1A46     		mov	r2, r3
 363 00da 97F83730 		ldrb	r3, [r7, #55]
 364 00de 1343     		orrs	r3, r3, r2
 365 00e0 87F83730 		strb	r3, [r7, #55]
 366 00e4 07F10F01 		add	r1, r7, #15
 367 00e8 4FF0FF33 		mov	r3, #-1
 368 00ec 0122     		movs	r2, #1
 369 00ee 7868     		ldr	r0, [r7, #4]
 370 00f0 FFF7FEFF 		bl	sd_card_receive_cmd_response
 371 00f4 0346     		mov	r3, r0
 372 00f6 1A46     		mov	r2, r3
 373 00f8 97F83730 		ldrb	r3, [r7, #55]
 374 00fc 1343     		orrs	r3, r3, r2
 375 00fe 87F83730 		strb	r3, [r7, #55]
 376 0102 0122     		movs	r2, #1
 377 0104 4FF48051 		mov	r1, #4096
 378 0108 2648     		ldr	r0, .L27
 379 010a FFF7FEFF 		bl	HAL_GPIO_WritePin
  79:External/SDCard_Driver/Src/sdcard_driver.c ****     SEND_CMD(hspi, acmd41, acmd41_response, status);
 380              		.loc 1 79 5
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 9


 381 010e 0022     		movs	r2, #0
 382 0110 4FF48051 		mov	r1, #4096
 383 0114 2348     		ldr	r0, .L27
 384 0116 FFF7FEFF 		bl	HAL_GPIO_WritePin
 385 011a 07F11801 		add	r1, r7, #24
 386 011e 4FF0FF33 		mov	r3, #-1
 387 0122 0622     		movs	r2, #6
 388 0124 7868     		ldr	r0, [r7, #4]
 389 0126 FFF7FEFF 		bl	HAL_SPI_Transmit
 390 012a 0346     		mov	r3, r0
 391 012c 1A46     		mov	r2, r3
 392 012e 97F83730 		ldrb	r3, [r7, #55]
 393 0132 1343     		orrs	r3, r3, r2
 394 0134 87F83730 		strb	r3, [r7, #55]
 395 0138 07F10E01 		add	r1, r7, #14
 396 013c 4FF0FF33 		mov	r3, #-1
 397 0140 0122     		movs	r2, #1
 398 0142 7868     		ldr	r0, [r7, #4]
 399 0144 FFF7FEFF 		bl	sd_card_receive_cmd_response
 400 0148 0346     		mov	r3, r0
 401 014a 1A46     		mov	r2, r3
 402 014c 97F83730 		ldrb	r3, [r7, #55]
 403 0150 1343     		orrs	r3, r3, r2
 404 0152 87F83730 		strb	r3, [r7, #55]
 405 0156 0122     		movs	r2, #1
 406 0158 4FF48051 		mov	r1, #4096
 407 015c 1148     		ldr	r0, .L27
 408 015e FFF7FEFF 		bl	HAL_GPIO_WritePin
  80:External/SDCard_Driver/Src/sdcard_driver.c **** 		
  81:External/SDCard_Driver/Src/sdcard_driver.c **** 		if (acmd41_response == 0x0)
 409              		.loc 1 81 23
 410 0162 BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 411              		.loc 1 81 6
 412 0164 002B     		cmp	r3, #0
 413 0166 10D0     		beq	.L26
  82:External/SDCard_Driver/Src/sdcard_driver.c **** 			break;
  83:External/SDCard_Driver/Src/sdcard_driver.c ****     if (acmd41_response & ILLEGAL_COMMAND)
 414              		.loc 1 83 25
 415 0168 BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 416 016a 03F00403 		and	r3, r3, #4
 417              		.loc 1 83 8
 418 016e 002B     		cmp	r3, #0
 419 0170 01D0     		beq	.L21
  84:External/SDCard_Driver/Src/sdcard_driver.c **** 			return HAL_ERROR;
 420              		.loc 1 84 11
 421 0172 0123     		movs	r3, #1
 422 0174 11E0     		b	.L24
 423              	.L21:
  85:External/SDCard_Driver/Src/sdcard_driver.c ****     // Card initialization shall be completed within 1 second 
  86:External/SDCard_Driver/Src/sdcard_driver.c ****     // from the first ACMD41
  87:External/SDCard_Driver/Src/sdcard_driver.c ****     if (HAL_GetTick() - tickstart > 1000)
 424              		.loc 1 87 9
 425 0176 FFF7FEFF 		bl	HAL_GetTick
 426 017a 0246     		mov	r2, r0
 427              		.loc 1 87 23
 428 017c 3B6B     		ldr	r3, [r7, #48]
 429 017e D31A     		subs	r3, r2, r3
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 10


 430              		.loc 1 87 8
 431 0180 B3F57A7F 		cmp	r3, #1000
 432 0184 99D9     		bls	.L23
  88:External/SDCard_Driver/Src/sdcard_driver.c ****       return HAL_TIMEOUT;
 433              		.loc 1 88 14
 434 0186 0323     		movs	r3, #3
 435 0188 07E0     		b	.L24
 436              	.L26:
  82:External/SDCard_Driver/Src/sdcard_driver.c ****     if (acmd41_response & ILLEGAL_COMMAND)
 437              		.loc 1 82 4
 438 018a 00BF     		nop
  89:External/SDCard_Driver/Src/sdcard_driver.c **** 	}
  90:External/SDCard_Driver/Src/sdcard_driver.c **** 
  91:External/SDCard_Driver/Src/sdcard_driver.c ****   sd_status.version = 1;
 439              		.loc 1 91 21
 440 018c 064B     		ldr	r3, .L27+4
 441 018e 0122     		movs	r2, #1
 442 0190 1A70     		strb	r2, [r3]
  92:External/SDCard_Driver/Src/sdcard_driver.c ****   sd_status.capacity = STANDART;
 443              		.loc 1 92 22
 444 0192 054B     		ldr	r3, .L27+4
 445 0194 0022     		movs	r2, #0
 446 0196 5A70     		strb	r2, [r3, #1]
  93:External/SDCard_Driver/Src/sdcard_driver.c **** 
  94:External/SDCard_Driver/Src/sdcard_driver.c ****   return HAL_OK;
 447              		.loc 1 94 10
 448 0198 0023     		movs	r3, #0
 449              	.L24:
  95:External/SDCard_Driver/Src/sdcard_driver.c **** }
 450              		.loc 1 95 1 discriminator 1
 451 019a 1846     		mov	r0, r3
 452 019c 3837     		adds	r7, r7, #56
 453              	.LCFI13:
 454              		.cfi_def_cfa_offset 8
 455 019e BD46     		mov	sp, r7
 456              	.LCFI14:
 457              		.cfi_def_cfa_register 13
 458              		@ sp needed
 459 01a0 80BD     		pop	{r7, pc}
 460              	.L28:
 461 01a2 00BF     		.align	2
 462              	.L27:
 463 01a4 000C0140 		.word	1073810432
 464 01a8 00000000 		.word	sd_status
 465              		.cfi_endproc
 466              	.LFE67:
 468              		.section	.text.sd_card_v2_init_process,"ax",%progbits
 469              		.align	1
 470              		.global	sd_card_v2_init_process
 471              		.syntax unified
 472              		.thumb
 473              		.thumb_func
 475              	sd_card_v2_init_process:
 476              	.LFB68:
  96:External/SDCard_Driver/Src/sdcard_driver.c **** 
  97:External/SDCard_Driver/Src/sdcard_driver.c **** HAL_StatusTypeDef sd_card_v2_init_process(
  98:External/SDCard_Driver/Src/sdcard_driver.c ****   SPI_HandleTypeDef* hspi
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 11


  99:External/SDCard_Driver/Src/sdcard_driver.c **** )
 100:External/SDCard_Driver/Src/sdcard_driver.c **** {
 477              		.loc 1 100 1
 478              		.cfi_startproc
 479              		@ args = 0, pretend = 0, frame = 56
 480              		@ frame_needed = 1, uses_anonymous_args = 0
 481 0000 80B5     		push	{r7, lr}
 482              	.LCFI15:
 483              		.cfi_def_cfa_offset 8
 484              		.cfi_offset 7, -8
 485              		.cfi_offset 14, -4
 486 0002 8EB0     		sub	sp, sp, #56
 487              	.LCFI16:
 488              		.cfi_def_cfa_offset 64
 489 0004 00AF     		add	r7, sp, #0
 490              	.LCFI17:
 491              		.cfi_def_cfa_register 7
 492 0006 7860     		str	r0, [r7, #4]
 101:External/SDCard_Driver/Src/sdcard_driver.c ****   // Reads OCR to get supported voltage
 102:External/SDCard_Driver/Src/sdcard_driver.c **** 	sd_card_command cmd58 = sd_card_get_cmd(58, 0x0);
 493              		.loc 1 102 26
 494 0008 07F12803 		add	r3, r7, #40
 495 000c 0022     		movs	r2, #0
 496 000e 3A21     		movs	r1, #58
 497 0010 1846     		mov	r0, r3
 498 0012 FFF7FEFF 		bl	sd_card_get_cmd
 103:External/SDCard_Driver/Src/sdcard_driver.c **** 	sd_card_command cmd55 = sd_card_get_cmd(55, 0x0);
 499              		.loc 1 103 26
 500 0016 07F12003 		add	r3, r7, #32
 501 001a 0022     		movs	r2, #0
 502 001c 3721     		movs	r1, #55
 503 001e 1846     		mov	r0, r3
 504 0020 FFF7FEFF 		bl	sd_card_get_cmd
 104:External/SDCard_Driver/Src/sdcard_driver.c **** 	sd_card_command acmd41 = sd_card_get_cmd(41, 0x0);
 505              		.loc 1 104 27
 506 0024 07F11803 		add	r3, r7, #24
 507 0028 0022     		movs	r2, #0
 508 002a 2921     		movs	r1, #41
 509 002c 1846     		mov	r0, r3
 510 002e FFF7FEFF 		bl	sd_card_get_cmd
 105:External/SDCard_Driver/Src/sdcard_driver.c **** 	sd_card_r3_response cmd58_response = { 0 };
 511              		.loc 1 105 22
 512 0032 07F11003 		add	r3, r7, #16
 513 0036 0022     		movs	r2, #0
 514 0038 1A60     		str	r2, [r3]
 515 003a 1A71     		strb	r2, [r3, #4]
 106:External/SDCard_Driver/Src/sdcard_driver.c **** 	sd_card_r1_response cmd55_response = { 0 };
 516              		.loc 1 106 22
 517 003c 0023     		movs	r3, #0
 518 003e FB73     		strb	r3, [r7, #15]
 107:External/SDCard_Driver/Src/sdcard_driver.c **** 	sd_card_r1_response acmd41_response = { 0 };
 519              		.loc 1 107 22
 520 0040 0023     		movs	r3, #0
 521 0042 BB73     		strb	r3, [r7, #14]
 108:External/SDCard_Driver/Src/sdcard_driver.c ****   HAL_StatusTypeDef status = HAL_OK;
 522              		.loc 1 108 21
 523 0044 0023     		movs	r3, #0
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 12


 524 0046 87F83730 		strb	r3, [r7, #55]
 109:External/SDCard_Driver/Src/sdcard_driver.c **** 
 110:External/SDCard_Driver/Src/sdcard_driver.c ****   SEND_CMD(hspi, cmd58, cmd58_response, status);
 525              		.loc 1 110 3
 526 004a 0022     		movs	r2, #0
 527 004c 4FF48051 		mov	r1, #4096
 528 0050 6A48     		ldr	r0, .L42
 529 0052 FFF7FEFF 		bl	HAL_GPIO_WritePin
 530 0056 07F12801 		add	r1, r7, #40
 531 005a 4FF0FF33 		mov	r3, #-1
 532 005e 0622     		movs	r2, #6
 533 0060 7868     		ldr	r0, [r7, #4]
 534 0062 FFF7FEFF 		bl	HAL_SPI_Transmit
 535 0066 0346     		mov	r3, r0
 536 0068 1A46     		mov	r2, r3
 537 006a 97F83730 		ldrb	r3, [r7, #55]
 538 006e 1343     		orrs	r3, r3, r2
 539 0070 87F83730 		strb	r3, [r7, #55]
 540 0074 07F11001 		add	r1, r7, #16
 541 0078 4FF0FF33 		mov	r3, #-1
 542 007c 0522     		movs	r2, #5
 543 007e 7868     		ldr	r0, [r7, #4]
 544 0080 FFF7FEFF 		bl	sd_card_receive_cmd_response
 545 0084 0346     		mov	r3, r0
 546 0086 1A46     		mov	r2, r3
 547 0088 97F83730 		ldrb	r3, [r7, #55]
 548 008c 1343     		orrs	r3, r3, r2
 549 008e 87F83730 		strb	r3, [r7, #55]
 550 0092 0122     		movs	r2, #1
 551 0094 4FF48051 		mov	r1, #4096
 552 0098 5848     		ldr	r0, .L42
 553 009a FFF7FEFF 		bl	HAL_GPIO_WritePin
 111:External/SDCard_Driver/Src/sdcard_driver.c **** 	
 112:External/SDCard_Driver/Src/sdcard_driver.c **** 	// Check voltage. The card must support 2.7-3.6V
 113:External/SDCard_Driver/Src/sdcard_driver.c ****   // MSB. Second byte is 23 - 16 bits of OCR
 114:External/SDCard_Driver/Src/sdcard_driver.c ****   // Third byte starts with 15 bit oof OCR
 115:External/SDCard_Driver/Src/sdcard_driver.c **** 	if (!((cmd58_response.ocr_register_content[1] & 0x1f) &&
 554              		.loc 1 115 44
 555 009e BB7C     		ldrb	r3, [r7, #18]	@ zero_extendqisi2
 556              		.loc 1 115 48
 557 00a0 03F01F03 		and	r3, r3, #31
 558              		.loc 1 115 5
 559 00a4 002B     		cmp	r3, #0
 560 00a6 03D0     		beq	.L30
 116:External/SDCard_Driver/Src/sdcard_driver.c ****     (cmd58_response.ocr_register_content[2] & 0x80)))
 561              		.loc 1 116 41 discriminator 1
 562 00a8 FB7C     		ldrb	r3, [r7, #19]	@ zero_extendqisi2
 115:External/SDCard_Driver/Src/sdcard_driver.c ****     (cmd58_response.ocr_register_content[2] & 0x80)))
 563              		.loc 1 115 56 discriminator 1
 564 00aa 5BB2     		sxtb	r3, r3
 115:External/SDCard_Driver/Src/sdcard_driver.c ****     (cmd58_response.ocr_register_content[2] & 0x80)))
 565              		.loc 1 115 6 discriminator 1
 566 00ac 002B     		cmp	r3, #0
 567 00ae 01DB     		blt	.L31
 568              	.L30:
 117:External/SDCard_Driver/Src/sdcard_driver.c ****     return HAL_ERROR;
 569              		.loc 1 117 12
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 13


 570 00b0 0123     		movs	r3, #1
 571 00b2 9FE0     		b	.L39
 572              	.L31:
 118:External/SDCard_Driver/Src/sdcard_driver.c **** 
 119:External/SDCard_Driver/Src/sdcard_driver.c **** 	uint32_t tickstart = HAL_GetTick();
 573              		.loc 1 119 23
 574 00b4 FFF7FEFF 		bl	HAL_GetTick
 575 00b8 3863     		str	r0, [r7, #48]
 576              	.L36:
 120:External/SDCard_Driver/Src/sdcard_driver.c **** 	while (true)
 121:External/SDCard_Driver/Src/sdcard_driver.c **** 	{
 122:External/SDCard_Driver/Src/sdcard_driver.c ****     SEND_CMD(hspi, cmd55, cmd55_response, status);
 577              		.loc 1 122 5
 578 00ba 0022     		movs	r2, #0
 579 00bc 4FF48051 		mov	r1, #4096
 580 00c0 4E48     		ldr	r0, .L42
 581 00c2 FFF7FEFF 		bl	HAL_GPIO_WritePin
 582 00c6 07F12001 		add	r1, r7, #32
 583 00ca 4FF0FF33 		mov	r3, #-1
 584 00ce 0622     		movs	r2, #6
 585 00d0 7868     		ldr	r0, [r7, #4]
 586 00d2 FFF7FEFF 		bl	HAL_SPI_Transmit
 587 00d6 0346     		mov	r3, r0
 588 00d8 1A46     		mov	r2, r3
 589 00da 97F83730 		ldrb	r3, [r7, #55]
 590 00de 1343     		orrs	r3, r3, r2
 591 00e0 87F83730 		strb	r3, [r7, #55]
 592 00e4 07F10F01 		add	r1, r7, #15
 593 00e8 4FF0FF33 		mov	r3, #-1
 594 00ec 0122     		movs	r2, #1
 595 00ee 7868     		ldr	r0, [r7, #4]
 596 00f0 FFF7FEFF 		bl	sd_card_receive_cmd_response
 597 00f4 0346     		mov	r3, r0
 598 00f6 1A46     		mov	r2, r3
 599 00f8 97F83730 		ldrb	r3, [r7, #55]
 600 00fc 1343     		orrs	r3, r3, r2
 601 00fe 87F83730 		strb	r3, [r7, #55]
 602 0102 0122     		movs	r2, #1
 603 0104 4FF48051 		mov	r1, #4096
 604 0108 3C48     		ldr	r0, .L42
 605 010a FFF7FEFF 		bl	HAL_GPIO_WritePin
 123:External/SDCard_Driver/Src/sdcard_driver.c ****     SEND_CMD(hspi, acmd41, acmd41_response, status);
 606              		.loc 1 123 5
 607 010e 0022     		movs	r2, #0
 608 0110 4FF48051 		mov	r1, #4096
 609 0114 3948     		ldr	r0, .L42
 610 0116 FFF7FEFF 		bl	HAL_GPIO_WritePin
 611 011a 07F11801 		add	r1, r7, #24
 612 011e 4FF0FF33 		mov	r3, #-1
 613 0122 0622     		movs	r2, #6
 614 0124 7868     		ldr	r0, [r7, #4]
 615 0126 FFF7FEFF 		bl	HAL_SPI_Transmit
 616 012a 0346     		mov	r3, r0
 617 012c 1A46     		mov	r2, r3
 618 012e 97F83730 		ldrb	r3, [r7, #55]
 619 0132 1343     		orrs	r3, r3, r2
 620 0134 87F83730 		strb	r3, [r7, #55]
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 14


 621 0138 07F10E01 		add	r1, r7, #14
 622 013c 4FF0FF33 		mov	r3, #-1
 623 0140 0122     		movs	r2, #1
 624 0142 7868     		ldr	r0, [r7, #4]
 625 0144 FFF7FEFF 		bl	sd_card_receive_cmd_response
 626 0148 0346     		mov	r3, r0
 627 014a 1A46     		mov	r2, r3
 628 014c 97F83730 		ldrb	r3, [r7, #55]
 629 0150 1343     		orrs	r3, r3, r2
 630 0152 87F83730 		strb	r3, [r7, #55]
 631 0156 0122     		movs	r2, #1
 632 0158 4FF48051 		mov	r1, #4096
 633 015c 2748     		ldr	r0, .L42
 634 015e FFF7FEFF 		bl	HAL_GPIO_WritePin
 124:External/SDCard_Driver/Src/sdcard_driver.c **** 		
 125:External/SDCard_Driver/Src/sdcard_driver.c **** 		if (acmd41_response == 0x0)
 635              		.loc 1 125 23
 636 0162 BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 637              		.loc 1 125 6
 638 0164 002B     		cmp	r3, #0
 639 0166 09D0     		beq	.L41
 126:External/SDCard_Driver/Src/sdcard_driver.c **** 			break;
 127:External/SDCard_Driver/Src/sdcard_driver.c ****     // Card initialization shall be completed within 1 second 
 128:External/SDCard_Driver/Src/sdcard_driver.c ****     // from the first ACMD41
 129:External/SDCard_Driver/Src/sdcard_driver.c ****     if (HAL_GetTick() - tickstart > 1000)
 640              		.loc 1 129 9
 641 0168 FFF7FEFF 		bl	HAL_GetTick
 642 016c 0246     		mov	r2, r0
 643              		.loc 1 129 23
 644 016e 3B6B     		ldr	r3, [r7, #48]
 645 0170 D31A     		subs	r3, r2, r3
 646              		.loc 1 129 8
 647 0172 B3F57A7F 		cmp	r3, #1000
 648 0176 A0D9     		bls	.L36
 130:External/SDCard_Driver/Src/sdcard_driver.c ****       return HAL_TIMEOUT;
 649              		.loc 1 130 14
 650 0178 0323     		movs	r3, #3
 651 017a 3BE0     		b	.L39
 652              	.L41:
 126:External/SDCard_Driver/Src/sdcard_driver.c **** 			break;
 653              		.loc 1 126 4
 654 017c 00BF     		nop
 131:External/SDCard_Driver/Src/sdcard_driver.c **** 	}
 132:External/SDCard_Driver/Src/sdcard_driver.c **** 
 133:External/SDCard_Driver/Src/sdcard_driver.c ****   // Read OCR
 134:External/SDCard_Driver/Src/sdcard_driver.c ****   SELECT_SD();
 655              		.loc 1 134 3
 656 017e 0022     		movs	r2, #0
 657 0180 4FF48051 		mov	r1, #4096
 658 0184 1D48     		ldr	r0, .L42
 659 0186 FFF7FEFF 		bl	HAL_GPIO_WritePin
 135:External/SDCard_Driver/Src/sdcard_driver.c **** 	status |= HAL_SPI_Transmit(hspi, (uint8_t*)&cmd58, 6, HAL_MAX_DELAY);
 660              		.loc 1 135 12
 661 018a 07F12801 		add	r1, r7, #40
 662 018e 4FF0FF33 		mov	r3, #-1
 663 0192 0622     		movs	r2, #6
 664 0194 7868     		ldr	r0, [r7, #4]
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 15


 665 0196 FFF7FEFF 		bl	HAL_SPI_Transmit
 666 019a 0346     		mov	r3, r0
 667 019c 1A46     		mov	r2, r3
 668              		.loc 1 135 9
 669 019e 97F83730 		ldrb	r3, [r7, #55]
 670 01a2 1343     		orrs	r3, r3, r2
 671 01a4 87F83730 		strb	r3, [r7, #55]
 136:External/SDCard_Driver/Src/sdcard_driver.c **** 	status |= sd_card_receive_cmd_response(
 672              		.loc 1 136 12
 673 01a8 07F11001 		add	r1, r7, #16
 674 01ac 4FF0FF33 		mov	r3, #-1
 675 01b0 0522     		movs	r2, #5
 676 01b2 7868     		ldr	r0, [r7, #4]
 677 01b4 FFF7FEFF 		bl	sd_card_receive_cmd_response
 678 01b8 0346     		mov	r3, r0
 679 01ba 1A46     		mov	r2, r3
 680              		.loc 1 136 9
 681 01bc 97F83730 		ldrb	r3, [r7, #55]
 682 01c0 1343     		orrs	r3, r3, r2
 683 01c2 87F83730 		strb	r3, [r7, #55]
 137:External/SDCard_Driver/Src/sdcard_driver.c ****     hspi, (uint8_t*)&cmd58_response, 5, HAL_MAX_DELAY
 138:External/SDCard_Driver/Src/sdcard_driver.c ****   );
 139:External/SDCard_Driver/Src/sdcard_driver.c ****   DISELECT_SD();
 684              		.loc 1 139 3
 685 01c6 0122     		movs	r2, #1
 686 01c8 4FF48051 		mov	r1, #4096
 687 01cc 0B48     		ldr	r0, .L42
 688 01ce FFF7FEFF 		bl	HAL_GPIO_WritePin
 140:External/SDCard_Driver/Src/sdcard_driver.c **** 
 141:External/SDCard_Driver/Src/sdcard_driver.c ****   if (cmd58_response.ocr_register_content[0] & 0x40) // Check CCS
 689              		.loc 1 141 42
 690 01d2 7B7C     		ldrb	r3, [r7, #17]	@ zero_extendqisi2
 691              		.loc 1 141 46
 692 01d4 03F04003 		and	r3, r3, #64
 693              		.loc 1 141 6
 694 01d8 002B     		cmp	r3, #0
 695 01da 03D0     		beq	.L37
 142:External/SDCard_Driver/Src/sdcard_driver.c ****     sd_status.capacity = STANDART;
 696              		.loc 1 142 24
 697 01dc 084B     		ldr	r3, .L42+4
 698 01de 0022     		movs	r2, #0
 699 01e0 5A70     		strb	r2, [r3, #1]
 700 01e2 02E0     		b	.L38
 701              	.L37:
 143:External/SDCard_Driver/Src/sdcard_driver.c ****   else
 144:External/SDCard_Driver/Src/sdcard_driver.c ****     sd_status.capacity = HIGH_OR_EXTENDED;
 702              		.loc 1 144 24
 703 01e4 064B     		ldr	r3, .L42+4
 704 01e6 0122     		movs	r2, #1
 705 01e8 5A70     		strb	r2, [r3, #1]
 706              	.L38:
 145:External/SDCard_Driver/Src/sdcard_driver.c ****   sd_status.version = 2;
 707              		.loc 1 145 21
 708 01ea 054B     		ldr	r3, .L42+4
 709 01ec 0222     		movs	r2, #2
 710 01ee 1A70     		strb	r2, [r3]
 146:External/SDCard_Driver/Src/sdcard_driver.c **** 	
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 16


 147:External/SDCard_Driver/Src/sdcard_driver.c **** 	return status;
 711              		.loc 1 147 9
 712 01f0 97F83730 		ldrb	r3, [r7, #55]	@ zero_extendqisi2
 713              	.L39:
 148:External/SDCard_Driver/Src/sdcard_driver.c **** }
 714              		.loc 1 148 1 discriminator 1
 715 01f4 1846     		mov	r0, r3
 716 01f6 3837     		adds	r7, r7, #56
 717              	.LCFI18:
 718              		.cfi_def_cfa_offset 8
 719 01f8 BD46     		mov	sp, r7
 720              	.LCFI19:
 721              		.cfi_def_cfa_register 13
 722              		@ sp needed
 723 01fa 80BD     		pop	{r7, pc}
 724              	.L43:
 725              		.align	2
 726              	.L42:
 727 01fc 000C0140 		.word	1073810432
 728 0200 00000000 		.word	sd_status
 729              		.cfi_endproc
 730              	.LFE68:
 732              		.section	.text.sd_card_reset,"ax",%progbits
 733              		.align	1
 734              		.global	sd_card_reset
 735              		.syntax unified
 736              		.thumb
 737              		.thumb_func
 739              	sd_card_reset:
 740              	.LFB69:
 149:External/SDCard_Driver/Src/sdcard_driver.c **** 
 150:External/SDCard_Driver/Src/sdcard_driver.c **** HAL_StatusTypeDef sd_card_reset(SPI_HandleTypeDef *hspi)
 151:External/SDCard_Driver/Src/sdcard_driver.c **** {
 741              		.loc 1 151 1
 742              		.cfi_startproc
 743              		@ args = 0, pretend = 0, frame = 24
 744              		@ frame_needed = 1, uses_anonymous_args = 0
 745 0000 80B5     		push	{r7, lr}
 746              	.LCFI20:
 747              		.cfi_def_cfa_offset 8
 748              		.cfi_offset 7, -8
 749              		.cfi_offset 14, -4
 750 0002 86B0     		sub	sp, sp, #24
 751              	.LCFI21:
 752              		.cfi_def_cfa_offset 32
 753 0004 00AF     		add	r7, sp, #0
 754              	.LCFI22:
 755              		.cfi_def_cfa_register 7
 756 0006 7860     		str	r0, [r7, #4]
 152:External/SDCard_Driver/Src/sdcard_driver.c **** 	// 2.7-3.6V and check pattern
 153:External/SDCard_Driver/Src/sdcard_driver.c **** 	sd_card_command cmd8 = sd_card_get_cmd(8, (1 << 8) | 0x55);
 757              		.loc 1 153 25
 758 0008 07F11003 		add	r3, r7, #16
 759 000c 40F25512 		movw	r2, #341
 760 0010 0821     		movs	r1, #8
 761 0012 1846     		mov	r0, r3
 762 0014 FFF7FEFF 		bl	sd_card_get_cmd
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 17


 154:External/SDCard_Driver/Src/sdcard_driver.c **** 	sd_card_r7_response cmd8_response = { 0 };
 763              		.loc 1 154 22
 764 0018 07F10803 		add	r3, r7, #8
 765 001c 0022     		movs	r2, #0
 766 001e 1A60     		str	r2, [r3]
 767 0020 1A71     		strb	r2, [r3, #4]
 155:External/SDCard_Driver/Src/sdcard_driver.c **** 
 156:External/SDCard_Driver/Src/sdcard_driver.c ****   HAL_StatusTypeDef status = sd_card_enter_spi_mode(hspi);
 768              		.loc 1 156 30
 769 0022 7868     		ldr	r0, [r7, #4]
 770 0024 FFF7FEFF 		bl	sd_card_enter_spi_mode
 771 0028 0346     		mov	r3, r0
 772 002a FB75     		strb	r3, [r7, #23]
 157:External/SDCard_Driver/Src/sdcard_driver.c ****   sd_card_enter_spi_mode(hspi);
 773              		.loc 1 157 3
 774 002c 7868     		ldr	r0, [r7, #4]
 775 002e FFF7FEFF 		bl	sd_card_enter_spi_mode
 158:External/SDCard_Driver/Src/sdcard_driver.c **** 
 159:External/SDCard_Driver/Src/sdcard_driver.c ****   SEND_CMD(hspi, cmd8, cmd8_response, status);
 776              		.loc 1 159 3
 777 0032 0022     		movs	r2, #0
 778 0034 4FF48051 		mov	r1, #4096
 779 0038 2A48     		ldr	r0, .L53
 780 003a FFF7FEFF 		bl	HAL_GPIO_WritePin
 781 003e 07F11001 		add	r1, r7, #16
 782 0042 4FF0FF33 		mov	r3, #-1
 783 0046 0622     		movs	r2, #6
 784 0048 7868     		ldr	r0, [r7, #4]
 785 004a FFF7FEFF 		bl	HAL_SPI_Transmit
 786 004e 0346     		mov	r3, r0
 787 0050 1A46     		mov	r2, r3
 788 0052 FB7D     		ldrb	r3, [r7, #23]
 789 0054 1343     		orrs	r3, r3, r2
 790 0056 FB75     		strb	r3, [r7, #23]
 791 0058 07F10801 		add	r1, r7, #8
 792 005c 4FF0FF33 		mov	r3, #-1
 793 0060 0522     		movs	r2, #5
 794 0062 7868     		ldr	r0, [r7, #4]
 795 0064 FFF7FEFF 		bl	sd_card_receive_cmd_response
 796 0068 0346     		mov	r3, r0
 797 006a 1A46     		mov	r2, r3
 798 006c FB7D     		ldrb	r3, [r7, #23]
 799 006e 1343     		orrs	r3, r3, r2
 800 0070 FB75     		strb	r3, [r7, #23]
 801 0072 0122     		movs	r2, #1
 802 0074 4FF48051 		mov	r1, #4096
 803 0078 1A48     		ldr	r0, .L53
 804 007a FFF7FEFF 		bl	HAL_GPIO_WritePin
 160:External/SDCard_Driver/Src/sdcard_driver.c **** 
 161:External/SDCard_Driver/Src/sdcard_driver.c **** 	if (status)
 805              		.loc 1 161 5
 806 007e FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 807 0080 002B     		cmp	r3, #0
 808 0082 20D1     		bne	.L52
 162:External/SDCard_Driver/Src/sdcard_driver.c **** 		goto end_of_initialization;
 163:External/SDCard_Driver/Src/sdcard_driver.c **** 	
 164:External/SDCard_Driver/Src/sdcard_driver.c **** 	// Illegal command hence version 1.0 sd card
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 18


 165:External/SDCard_Driver/Src/sdcard_driver.c **** 	if (cmd8_response.high_order_part & ILLEGAL_COMMAND)
 809              		.loc 1 165 19
 810 0084 3B7A     		ldrb	r3, [r7, #8]	@ zero_extendqisi2
 811              		.loc 1 165 36
 812 0086 03F00403 		and	r3, r3, #4
 813              		.loc 1 165 5
 814 008a 002B     		cmp	r3, #0
 815 008c 08D0     		beq	.L47
 166:External/SDCard_Driver/Src/sdcard_driver.c ****   {
 167:External/SDCard_Driver/Src/sdcard_driver.c **** 		status |= sd_card_v1_init_process(hspi);
 816              		.loc 1 167 13
 817 008e 7868     		ldr	r0, [r7, #4]
 818 0090 FFF7FEFF 		bl	sd_card_v1_init_process
 819 0094 0346     		mov	r3, r0
 820 0096 1A46     		mov	r2, r3
 821              		.loc 1 167 10
 822 0098 FB7D     		ldrb	r3, [r7, #23]
 823 009a 1343     		orrs	r3, r3, r2
 824 009c FB75     		strb	r3, [r7, #23]
 168:External/SDCard_Driver/Src/sdcard_driver.c ****     goto end_of_initialization;
 825              		.loc 1 168 5
 826 009e 13E0     		b	.L46
 827              	.L47:
 169:External/SDCard_Driver/Src/sdcard_driver.c ****   }
 170:External/SDCard_Driver/Src/sdcard_driver.c **** 
 171:External/SDCard_Driver/Src/sdcard_driver.c ****   // Check pattern or voltage inconsistency
 172:External/SDCard_Driver/Src/sdcard_driver.c **** 	if (!(cmd8_response.echo_back_of_check_pattern == 0x55 &&
 828              		.loc 1 172 21
 829 00a0 3B7B     		ldrb	r3, [r7, #12]	@ zero_extendqisi2
 830              		.loc 1 172 5
 831 00a2 552B     		cmp	r3, #85
 832 00a4 04D1     		bne	.L48
 173:External/SDCard_Driver/Src/sdcard_driver.c ****     GET_VOLTAGE_FROM_R7(cmd8_response) == 0x1))
 833              		.loc 1 173 5 discriminator 1
 834 00a6 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 835 00a8 03F00F03 		and	r3, r3, #15
 172:External/SDCard_Driver/Src/sdcard_driver.c ****     GET_VOLTAGE_FROM_R7(cmd8_response) == 0x1))
 836              		.loc 1 172 6 discriminator 1
 837 00ac 012B     		cmp	r3, #1
 838 00ae 01D0     		beq	.L49
 839              	.L48:
 174:External/SDCard_Driver/Src/sdcard_driver.c **** 		return HAL_ERROR;
 840              		.loc 1 174 10
 841 00b0 0123     		movs	r3, #1
 842 00b2 12E0     		b	.L51
 843              	.L49:
 175:External/SDCard_Driver/Src/sdcard_driver.c **** 	
 176:External/SDCard_Driver/Src/sdcard_driver.c **** 	status |= sd_card_v2_init_process(hspi);
 844              		.loc 1 176 12
 845 00b4 7868     		ldr	r0, [r7, #4]
 846 00b6 FFF7FEFF 		bl	sd_card_v2_init_process
 847 00ba 0346     		mov	r3, r0
 848 00bc 1A46     		mov	r2, r3
 849              		.loc 1 176 9
 850 00be FB7D     		ldrb	r3, [r7, #23]
 851 00c0 1343     		orrs	r3, r3, r2
 852 00c2 FB75     		strb	r3, [r7, #23]
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 19


 853 00c4 00E0     		b	.L46
 854              	.L52:
 162:External/SDCard_Driver/Src/sdcard_driver.c **** 	
 855              		.loc 1 162 3
 856 00c6 00BF     		nop
 857              	.L46:
 177:External/SDCard_Driver/Src/sdcard_driver.c **** 
 178:External/SDCard_Driver/Src/sdcard_driver.c **** end_of_initialization:
 179:External/SDCard_Driver/Src/sdcard_driver.c ****   sd_status.error_in_initialization = (bool)status;
 858              		.loc 1 179 39
 859 00c8 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 860 00ca 002B     		cmp	r3, #0
 861 00cc 14BF     		ite	ne
 862 00ce 0123     		movne	r3, #1
 863 00d0 0023     		moveq	r3, #0
 864 00d2 DAB2     		uxtb	r2, r3
 865              		.loc 1 179 37
 866 00d4 044B     		ldr	r3, .L53+4
 867 00d6 9A70     		strb	r2, [r3, #2]
 180:External/SDCard_Driver/Src/sdcard_driver.c **** 	return status;
 868              		.loc 1 180 9
 869 00d8 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 870              	.L51:
 181:External/SDCard_Driver/Src/sdcard_driver.c **** }
 871              		.loc 1 181 1 discriminator 1
 872 00da 1846     		mov	r0, r3
 873 00dc 1837     		adds	r7, r7, #24
 874              	.LCFI23:
 875              		.cfi_def_cfa_offset 8
 876 00de BD46     		mov	sp, r7
 877              	.LCFI24:
 878              		.cfi_def_cfa_register 13
 879              		@ sp needed
 880 00e0 80BD     		pop	{r7, pc}
 881              	.L54:
 882 00e2 00BF     		.align	2
 883              	.L53:
 884 00e4 000C0140 		.word	1073810432
 885 00e8 00000000 		.word	sd_status
 886              		.cfi_endproc
 887              	.LFE69:
 889              		.section	.text.sd_card_get_cmd,"ax",%progbits
 890              		.align	1
 891              		.global	sd_card_get_cmd
 892              		.syntax unified
 893              		.thumb
 894              		.thumb_func
 896              	sd_card_get_cmd:
 897              	.LFB70:
 182:External/SDCard_Driver/Src/sdcard_driver.c **** 
 183:External/SDCard_Driver/Src/sdcard_driver.c **** sd_card_command sd_card_get_cmd(uint8_t cmd_num, uint32_t arg)
 184:External/SDCard_Driver/Src/sdcard_driver.c **** {
 898              		.loc 1 184 1
 899              		.cfi_startproc
 900              		@ args = 0, pretend = 0, frame = 40
 901              		@ frame_needed = 1, uses_anonymous_args = 0
 902 0000 80B5     		push	{r7, lr}
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 20


 903              	.LCFI25:
 904              		.cfi_def_cfa_offset 8
 905              		.cfi_offset 7, -8
 906              		.cfi_offset 14, -4
 907 0002 8AB0     		sub	sp, sp, #40
 908              	.LCFI26:
 909              		.cfi_def_cfa_offset 48
 910 0004 00AF     		add	r7, sp, #0
 911              	.LCFI27:
 912              		.cfi_def_cfa_register 7
 913 0006 F860     		str	r0, [r7, #12]
 914 0008 0B46     		mov	r3, r1
 915 000a 7A60     		str	r2, [r7, #4]
 916 000c FB72     		strb	r3, [r7, #11]
 185:External/SDCard_Driver/Src/sdcard_driver.c **** 	crc_buffer_7 crc_buffer;
 186:External/SDCard_Driver/Src/sdcard_driver.c **** 	sd_card_command cmd = (sd_card_command) {
 917              		.loc 1 186 18
 918 000e 07F11C03 		add	r3, r7, #28
 919 0012 0022     		movs	r2, #0
 920 0014 1A60     		str	r2, [r3]
 921 0016 9A80     		strh	r2, [r3, #4]	@ movhi
 922 0018 FB7A     		ldrb	r3, [r7, #11]
 923 001a 43F04003 		orr	r3, r3, #64
 924 001e DBB2     		uxtb	r3, r3
 925 0020 3B77     		strb	r3, [r7, #28]
 926              	.LBB3:
 187:External/SDCard_Driver/Src/sdcard_driver.c **** 		.start_block = 0x40 | cmd_num,
 188:External/SDCard_Driver/Src/sdcard_driver.c **** 	};
 189:External/SDCard_Driver/Src/sdcard_driver.c **** 
 190:External/SDCard_Driver/Src/sdcard_driver.c ****   for (uint8_t i = 0; i < 4; i++) // Reverse memcpy
 927              		.loc 1 190 16
 928 0022 0023     		movs	r3, #0
 929 0024 87F82730 		strb	r3, [r7, #39]
 930              		.loc 1 190 3
 931 0028 1DE0     		b	.L56
 932              	.L57:
 933              	.LBB4:
 191:External/SDCard_Driver/Src/sdcard_driver.c ****   {
 192:External/SDCard_Driver/Src/sdcard_driver.c ****     uint8_t shift = i << 3;
 934              		.loc 1 192 13 discriminator 3
 935 002a 97F82730 		ldrb	r3, [r7, #39]
 936 002e DB00     		lsls	r3, r3, #3
 937 0030 87F82630 		strb	r3, [r7, #38]
 193:External/SDCard_Driver/Src/sdcard_driver.c ****     cmd.argument[3 - i] = (arg & (0xff << shift)) >> shift;
 938              		.loc 1 193 40 discriminator 3
 939 0034 97F82630 		ldrb	r3, [r7, #38]	@ zero_extendqisi2
 940 0038 FF22     		movs	r2, #255
 941 003a 02FA03F3 		lsl	r3, r2, r3
 942 003e 1A46     		mov	r2, r3
 943              		.loc 1 193 32 discriminator 3
 944 0040 7B68     		ldr	r3, [r7, #4]
 945 0042 1A40     		ands	r2, r2, r3
 946              		.loc 1 193 51 discriminator 3
 947 0044 97F82630 		ldrb	r3, [r7, #38]	@ zero_extendqisi2
 948 0048 DA40     		lsrs	r2, r2, r3
 949              		.loc 1 193 20 discriminator 3
 950 004a 97F82730 		ldrb	r3, [r7, #39]	@ zero_extendqisi2
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 21


 951 004e C3F10303 		rsb	r3, r3, #3
 952              		.loc 1 193 25 discriminator 3
 953 0052 D2B2     		uxtb	r2, r2
 954 0054 2833     		adds	r3, r3, #40
 955 0056 3B44     		add	r3, r3, r7
 956 0058 03F80B2C 		strb	r2, [r3, #-11]
 957              	.LBE4:
 190:External/SDCard_Driver/Src/sdcard_driver.c ****   {
 958              		.loc 1 190 31 discriminator 3
 959 005c 97F82730 		ldrb	r3, [r7, #39]	@ zero_extendqisi2
 960 0060 0133     		adds	r3, r3, #1
 961 0062 87F82730 		strb	r3, [r7, #39]
 962              	.L56:
 190:External/SDCard_Driver/Src/sdcard_driver.c ****   {
 963              		.loc 1 190 3 discriminator 1
 964 0066 97F82730 		ldrb	r3, [r7, #39]	@ zero_extendqisi2
 965 006a 032B     		cmp	r3, #3
 966 006c DDD9     		bls	.L57
 967              	.LBE3:
 194:External/SDCard_Driver/Src/sdcard_driver.c ****   }
 195:External/SDCard_Driver/Src/sdcard_driver.c **** 
 196:External/SDCard_Driver/Src/sdcard_driver.c **** 	cmd.crc_block = crc_buffer_calculate_crc_7(&crc_buffer, (uint8_t*)&cmd, 5);
 968              		.loc 1 196 18
 969 006e 07F11C01 		add	r1, r7, #28
 970 0072 07F12503 		add	r3, r7, #37
 971 0076 0522     		movs	r2, #5
 972 0078 1846     		mov	r0, r3
 973 007a FFF7FEFF 		bl	crc_buffer_calculate_crc_7
 974 007e 0346     		mov	r3, r0
 975              		.loc 1 196 16
 976 0080 87F82130 		strb	r3, [r7, #33]
 197:External/SDCard_Driver/Src/sdcard_driver.c **** 	
 198:External/SDCard_Driver/Src/sdcard_driver.c **** 	return cmd;
 977              		.loc 1 198 9
 978 0084 FB68     		ldr	r3, [r7, #12]
 979 0086 1A46     		mov	r2, r3
 980 0088 07F11C03 		add	r3, r7, #28
 981 008c 1868     		ldr	r0, [r3]
 982 008e 1060     		str	r0, [r2]	@ unaligned
 983 0090 9B88     		ldrh	r3, [r3, #4]	@ unaligned
 984 0092 9380     		strh	r3, [r2, #4]	@ unaligned
 199:External/SDCard_Driver/Src/sdcard_driver.c **** }
 985              		.loc 1 199 1
 986 0094 F868     		ldr	r0, [r7, #12]
 987 0096 2837     		adds	r7, r7, #40
 988              	.LCFI28:
 989              		.cfi_def_cfa_offset 8
 990 0098 BD46     		mov	sp, r7
 991              	.LCFI29:
 992              		.cfi_def_cfa_register 13
 993              		@ sp needed
 994 009a 80BD     		pop	{r7, pc}
 995              		.cfi_endproc
 996              	.LFE70:
 998              		.section	.text.sd_card_receive_byte,"ax",%progbits
 999              		.align	1
 1000              		.global	sd_card_receive_byte
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 22


 1001              		.syntax unified
 1002              		.thumb
 1003              		.thumb_func
 1005              	sd_card_receive_byte:
 1006              	.LFB71:
 200:External/SDCard_Driver/Src/sdcard_driver.c **** 
 201:External/SDCard_Driver/Src/sdcard_driver.c **** HAL_StatusTypeDef sd_card_receive_byte(
 202:External/SDCard_Driver/Src/sdcard_driver.c ****   SPI_HandleTypeDef *hspi, 
 203:External/SDCard_Driver/Src/sdcard_driver.c ****   uint8_t* data
 204:External/SDCard_Driver/Src/sdcard_driver.c **** )
 205:External/SDCard_Driver/Src/sdcard_driver.c **** {
 1007              		.loc 1 205 1
 1008              		.cfi_startproc
 1009              		@ args = 0, pretend = 0, frame = 16
 1010              		@ frame_needed = 1, uses_anonymous_args = 0
 1011 0000 80B5     		push	{r7, lr}
 1012              	.LCFI30:
 1013              		.cfi_def_cfa_offset 8
 1014              		.cfi_offset 7, -8
 1015              		.cfi_offset 14, -4
 1016 0002 86B0     		sub	sp, sp, #24
 1017              	.LCFI31:
 1018              		.cfi_def_cfa_offset 32
 1019 0004 02AF     		add	r7, sp, #8
 1020              	.LCFI32:
 1021              		.cfi_def_cfa 7, 24
 1022 0006 7860     		str	r0, [r7, #4]
 1023 0008 3960     		str	r1, [r7]
 206:External/SDCard_Driver/Src/sdcard_driver.c ****   uint8_t dummy_data = 0xff;
 1024              		.loc 1 206 11
 1025 000a FF23     		movs	r3, #255
 1026 000c FB73     		strb	r3, [r7, #15]
 207:External/SDCard_Driver/Src/sdcard_driver.c **** 
 208:External/SDCard_Driver/Src/sdcard_driver.c ****   return HAL_SPI_TransmitReceive(hspi, &dummy_data, data, 1, 1000);
 1027              		.loc 1 208 10
 1028 000e 07F10F01 		add	r1, r7, #15
 1029 0012 4FF47A73 		mov	r3, #1000
 1030 0016 0093     		str	r3, [sp]
 1031 0018 0123     		movs	r3, #1
 1032 001a 3A68     		ldr	r2, [r7]
 1033 001c 7868     		ldr	r0, [r7, #4]
 1034 001e FFF7FEFF 		bl	HAL_SPI_TransmitReceive
 1035 0022 0346     		mov	r3, r0
 209:External/SDCard_Driver/Src/sdcard_driver.c **** }
 1036              		.loc 1 209 1
 1037 0024 1846     		mov	r0, r3
 1038 0026 1037     		adds	r7, r7, #16
 1039              	.LCFI33:
 1040              		.cfi_def_cfa_offset 8
 1041 0028 BD46     		mov	sp, r7
 1042              	.LCFI34:
 1043              		.cfi_def_cfa_register 13
 1044              		@ sp needed
 1045 002a 80BD     		pop	{r7, pc}
 1046              		.cfi_endproc
 1047              	.LFE71:
 1049              		.section	.text.sd_card_receive_bytes,"ax",%progbits
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 23


 1050              		.align	1
 1051              		.global	sd_card_receive_bytes
 1052              		.syntax unified
 1053              		.thumb
 1054              		.thumb_func
 1056              	sd_card_receive_bytes:
 1057              	.LFB72:
 210:External/SDCard_Driver/Src/sdcard_driver.c **** 
 211:External/SDCard_Driver/Src/sdcard_driver.c **** HAL_StatusTypeDef sd_card_receive_bytes(
 212:External/SDCard_Driver/Src/sdcard_driver.c ****   SPI_HandleTypeDef *hspi,
 213:External/SDCard_Driver/Src/sdcard_driver.c ****   uint8_t* data,
 214:External/SDCard_Driver/Src/sdcard_driver.c ****   const uint8_t size
 215:External/SDCard_Driver/Src/sdcard_driver.c **** )
 216:External/SDCard_Driver/Src/sdcard_driver.c **** {
 1058              		.loc 1 216 1
 1059              		.cfi_startproc
 1060              		@ args = 0, pretend = 0, frame = 24
 1061              		@ frame_needed = 1, uses_anonymous_args = 0
 1062 0000 80B5     		push	{r7, lr}
 1063              	.LCFI35:
 1064              		.cfi_def_cfa_offset 8
 1065              		.cfi_offset 7, -8
 1066              		.cfi_offset 14, -4
 1067 0002 86B0     		sub	sp, sp, #24
 1068              	.LCFI36:
 1069              		.cfi_def_cfa_offset 32
 1070 0004 00AF     		add	r7, sp, #0
 1071              	.LCFI37:
 1072              		.cfi_def_cfa_register 7
 1073 0006 F860     		str	r0, [r7, #12]
 1074 0008 B960     		str	r1, [r7, #8]
 1075 000a 1346     		mov	r3, r2
 1076 000c FB71     		strb	r3, [r7, #7]
 217:External/SDCard_Driver/Src/sdcard_driver.c ****   HAL_StatusTypeDef status = 0;
 1077              		.loc 1 217 21
 1078 000e 0023     		movs	r3, #0
 1079 0010 FB75     		strb	r3, [r7, #23]
 1080              	.LBB5:
 218:External/SDCard_Driver/Src/sdcard_driver.c **** 
 219:External/SDCard_Driver/Src/sdcard_driver.c ****   for (uint8_t i = 0; i < size; i++)
 1081              		.loc 1 219 16
 1082 0012 0023     		movs	r3, #0
 1083 0014 BB75     		strb	r3, [r7, #22]
 1084              		.loc 1 219 3
 1085 0016 0EE0     		b	.L62
 1086              	.L63:
 220:External/SDCard_Driver/Src/sdcard_driver.c ****     status += sd_card_receive_byte(hspi, data + i);
 1087              		.loc 1 220 15 discriminator 3
 1088 0018 BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 1089 001a BA68     		ldr	r2, [r7, #8]
 1090 001c 1344     		add	r3, r3, r2
 1091 001e 1946     		mov	r1, r3
 1092 0020 F868     		ldr	r0, [r7, #12]
 1093 0022 FFF7FEFF 		bl	sd_card_receive_byte
 1094 0026 0346     		mov	r3, r0
 1095 0028 1A46     		mov	r2, r3
 1096              		.loc 1 220 12 discriminator 3
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 24


 1097 002a FB7D     		ldrb	r3, [r7, #23]
 1098 002c 1344     		add	r3, r3, r2
 1099 002e FB75     		strb	r3, [r7, #23]
 219:External/SDCard_Driver/Src/sdcard_driver.c ****     status += sd_card_receive_byte(hspi, data + i);
 1100              		.loc 1 219 34 discriminator 3
 1101 0030 BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 1102 0032 0133     		adds	r3, r3, #1
 1103 0034 BB75     		strb	r3, [r7, #22]
 1104              	.L62:
 219:External/SDCard_Driver/Src/sdcard_driver.c ****     status += sd_card_receive_byte(hspi, data + i);
 1105              		.loc 1 219 3 discriminator 1
 1106 0036 BA7D     		ldrb	r2, [r7, #22]	@ zero_extendqisi2
 1107 0038 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1108 003a 9A42     		cmp	r2, r3
 1109 003c ECD3     		bcc	.L63
 1110              	.LBE5:
 221:External/SDCard_Driver/Src/sdcard_driver.c ****   
 222:External/SDCard_Driver/Src/sdcard_driver.c ****   return status;
 1111              		.loc 1 222 10
 1112 003e FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 223:External/SDCard_Driver/Src/sdcard_driver.c **** }
 1113              		.loc 1 223 1
 1114 0040 1846     		mov	r0, r3
 1115 0042 1837     		adds	r7, r7, #24
 1116              	.LCFI38:
 1117              		.cfi_def_cfa_offset 8
 1118 0044 BD46     		mov	sp, r7
 1119              	.LCFI39:
 1120              		.cfi_def_cfa_register 13
 1121              		@ sp needed
 1122 0046 80BD     		pop	{r7, pc}
 1123              		.cfi_endproc
 1124              	.LFE72:
 1126              		.section	.text.sd_card_transmit_bytes,"ax",%progbits
 1127              		.align	1
 1128              		.global	sd_card_transmit_bytes
 1129              		.syntax unified
 1130              		.thumb
 1131              		.thumb_func
 1133              	sd_card_transmit_bytes:
 1134              	.LFB73:
 224:External/SDCard_Driver/Src/sdcard_driver.c **** 
 225:External/SDCard_Driver/Src/sdcard_driver.c **** HAL_StatusTypeDef sd_card_transmit_bytes(
 226:External/SDCard_Driver/Src/sdcard_driver.c ****   SPI_HandleTypeDef *hspi,
 227:External/SDCard_Driver/Src/sdcard_driver.c ****   uint8_t* data,
 228:External/SDCard_Driver/Src/sdcard_driver.c ****   const uint8_t size
 229:External/SDCard_Driver/Src/sdcard_driver.c **** )
 230:External/SDCard_Driver/Src/sdcard_driver.c **** {
 1135              		.loc 1 230 1
 1136              		.cfi_startproc
 1137              		@ args = 0, pretend = 0, frame = 24
 1138              		@ frame_needed = 1, uses_anonymous_args = 0
 1139 0000 80B5     		push	{r7, lr}
 1140              	.LCFI40:
 1141              		.cfi_def_cfa_offset 8
 1142              		.cfi_offset 7, -8
 1143              		.cfi_offset 14, -4
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 25


 1144 0002 86B0     		sub	sp, sp, #24
 1145              	.LCFI41:
 1146              		.cfi_def_cfa_offset 32
 1147 0004 00AF     		add	r7, sp, #0
 1148              	.LCFI42:
 1149              		.cfi_def_cfa_register 7
 1150 0006 F860     		str	r0, [r7, #12]
 1151 0008 B960     		str	r1, [r7, #8]
 1152 000a 1346     		mov	r3, r2
 1153 000c FB71     		strb	r3, [r7, #7]
 231:External/SDCard_Driver/Src/sdcard_driver.c ****   HAL_StatusTypeDef status = 0;
 1154              		.loc 1 231 21
 1155 000e 0023     		movs	r3, #0
 1156 0010 FB75     		strb	r3, [r7, #23]
 1157              	.LBB6:
 232:External/SDCard_Driver/Src/sdcard_driver.c **** 
 233:External/SDCard_Driver/Src/sdcard_driver.c ****   for (int16_t i = size - 1; i >= 0; i--)
 1158              		.loc 1 233 25
 1159 0012 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1160 0014 9BB2     		uxth	r3, r3
 1161 0016 013B     		subs	r3, r3, #1
 1162 0018 9BB2     		uxth	r3, r3
 1163              		.loc 1 233 16
 1164 001a BB82     		strh	r3, [r7, #20]	@ movhi
 1165              		.loc 1 233 3
 1166 001c 14E0     		b	.L66
 1167              	.L67:
 234:External/SDCard_Driver/Src/sdcard_driver.c ****     status += HAL_SPI_Transmit(hspi, data + i, 1, 1000);
 1168              		.loc 1 234 15 discriminator 3
 1169 001e B7F91430 		ldrsh	r3, [r7, #20]
 1170 0022 BA68     		ldr	r2, [r7, #8]
 1171 0024 D118     		adds	r1, r2, r3
 1172 0026 4FF47A73 		mov	r3, #1000
 1173 002a 0122     		movs	r2, #1
 1174 002c F868     		ldr	r0, [r7, #12]
 1175 002e FFF7FEFF 		bl	HAL_SPI_Transmit
 1176 0032 0346     		mov	r3, r0
 1177 0034 1A46     		mov	r2, r3
 1178              		.loc 1 234 12 discriminator 3
 1179 0036 FB7D     		ldrb	r3, [r7, #23]
 1180 0038 1344     		add	r3, r3, r2
 1181 003a FB75     		strb	r3, [r7, #23]
 233:External/SDCard_Driver/Src/sdcard_driver.c ****     status += HAL_SPI_Transmit(hspi, data + i, 1, 1000);
 1182              		.loc 1 233 39 discriminator 3
 1183 003c B7F91430 		ldrsh	r3, [r7, #20]
 1184 0040 9BB2     		uxth	r3, r3
 1185 0042 013B     		subs	r3, r3, #1
 1186 0044 9BB2     		uxth	r3, r3
 1187 0046 BB82     		strh	r3, [r7, #20]	@ movhi
 1188              	.L66:
 233:External/SDCard_Driver/Src/sdcard_driver.c ****     status += HAL_SPI_Transmit(hspi, data + i, 1, 1000);
 1189              		.loc 1 233 3 discriminator 1
 1190 0048 B7F91430 		ldrsh	r3, [r7, #20]
 1191 004c 002B     		cmp	r3, #0
 1192 004e E6DA     		bge	.L67
 1193              	.LBE6:
 235:External/SDCard_Driver/Src/sdcard_driver.c ****   
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 26


 236:External/SDCard_Driver/Src/sdcard_driver.c ****   return status;
 1194              		.loc 1 236 10
 1195 0050 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 237:External/SDCard_Driver/Src/sdcard_driver.c **** }
 1196              		.loc 1 237 1
 1197 0052 1846     		mov	r0, r3
 1198 0054 1837     		adds	r7, r7, #24
 1199              	.LCFI43:
 1200              		.cfi_def_cfa_offset 8
 1201 0056 BD46     		mov	sp, r7
 1202              	.LCFI44:
 1203              		.cfi_def_cfa_register 13
 1204              		@ sp needed
 1205 0058 80BD     		pop	{r7, pc}
 1206              		.cfi_endproc
 1207              	.LFE73:
 1209              		.section	.text.sd_card_wait_response,"ax",%progbits
 1210              		.align	1
 1211              		.global	sd_card_wait_response
 1212              		.syntax unified
 1213              		.thumb
 1214              		.thumb_func
 1216              	sd_card_wait_response:
 1217              	.LFB74:
 238:External/SDCard_Driver/Src/sdcard_driver.c **** 
 239:External/SDCard_Driver/Src/sdcard_driver.c **** // We are trying to get a non-zero byte.
 240:External/SDCard_Driver/Src/sdcard_driver.c **** // The received byte is written to the argument
 241:External/SDCard_Driver/Src/sdcard_driver.c **** HAL_StatusTypeDef sd_card_wait_response(
 242:External/SDCard_Driver/Src/sdcard_driver.c ****   SPI_HandleTypeDef *hspi,
 243:External/SDCard_Driver/Src/sdcard_driver.c ****   uint8_t* data
 244:External/SDCard_Driver/Src/sdcard_driver.c **** )
 245:External/SDCard_Driver/Src/sdcard_driver.c **** {
 1218              		.loc 1 245 1
 1219              		.cfi_startproc
 1220              		@ args = 0, pretend = 0, frame = 16
 1221              		@ frame_needed = 1, uses_anonymous_args = 0
 1222 0000 80B5     		push	{r7, lr}
 1223              	.LCFI45:
 1224              		.cfi_def_cfa_offset 8
 1225              		.cfi_offset 7, -8
 1226              		.cfi_offset 14, -4
 1227 0002 84B0     		sub	sp, sp, #16
 1228              	.LCFI46:
 1229              		.cfi_def_cfa_offset 24
 1230 0004 00AF     		add	r7, sp, #0
 1231              	.LCFI47:
 1232              		.cfi_def_cfa_register 7
 1233 0006 7860     		str	r0, [r7, #4]
 1234 0008 3960     		str	r1, [r7]
 246:External/SDCard_Driver/Src/sdcard_driver.c ****   HAL_StatusTypeDef status = 0;
 1235              		.loc 1 246 21
 1236 000a 0023     		movs	r3, #0
 1237 000c FB73     		strb	r3, [r7, #15]
 247:External/SDCard_Driver/Src/sdcard_driver.c ****   uint32_t captured_tick = HAL_GetTick();
 1238              		.loc 1 247 28
 1239 000e FFF7FEFF 		bl	HAL_GetTick
 1240 0012 B860     		str	r0, [r7, #8]
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 27


 1241              	.L72:
 248:External/SDCard_Driver/Src/sdcard_driver.c **** 
 249:External/SDCard_Driver/Src/sdcard_driver.c ****   do
 250:External/SDCard_Driver/Src/sdcard_driver.c ****   {
 251:External/SDCard_Driver/Src/sdcard_driver.c ****     if ((HAL_GetTick() - captured_tick) > 500)
 1242              		.loc 1 251 10
 1243 0014 FFF7FEFF 		bl	HAL_GetTick
 1244 0018 0246     		mov	r2, r0
 1245              		.loc 1 251 24
 1246 001a BB68     		ldr	r3, [r7, #8]
 1247 001c D31A     		subs	r3, r2, r3
 1248              		.loc 1 251 8
 1249 001e B3F5FA7F 		cmp	r3, #500
 1250 0022 01D9     		bls	.L70
 252:External/SDCard_Driver/Src/sdcard_driver.c ****       return HAL_TIMEOUT;
 1251              		.loc 1 252 14
 1252 0024 0323     		movs	r3, #3
 1253 0026 0CE0     		b	.L71
 1254              	.L70:
 253:External/SDCard_Driver/Src/sdcard_driver.c **** 
 254:External/SDCard_Driver/Src/sdcard_driver.c ****     status |= sd_card_receive_byte(hspi, data);
 1255              		.loc 1 254 15
 1256 0028 3968     		ldr	r1, [r7]
 1257 002a 7868     		ldr	r0, [r7, #4]
 1258 002c FFF7FEFF 		bl	sd_card_receive_byte
 1259 0030 0346     		mov	r3, r0
 1260 0032 1A46     		mov	r2, r3
 1261              		.loc 1 254 12
 1262 0034 FB7B     		ldrb	r3, [r7, #15]
 1263 0036 1343     		orrs	r3, r3, r2
 1264 0038 FB73     		strb	r3, [r7, #15]
 255:External/SDCard_Driver/Src/sdcard_driver.c ****   } while (data == NULL);
 1265              		.loc 1 255 3
 1266 003a 3B68     		ldr	r3, [r7]
 1267 003c 002B     		cmp	r3, #0
 1268 003e E9D0     		beq	.L72
 256:External/SDCard_Driver/Src/sdcard_driver.c **** 
 257:External/SDCard_Driver/Src/sdcard_driver.c ****   return status;
 1269              		.loc 1 257 10
 1270 0040 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1271              	.L71:
 258:External/SDCard_Driver/Src/sdcard_driver.c **** }
 1272              		.loc 1 258 1
 1273 0042 1846     		mov	r0, r3
 1274 0044 1037     		adds	r7, r7, #16
 1275              	.LCFI48:
 1276              		.cfi_def_cfa_offset 8
 1277 0046 BD46     		mov	sp, r7
 1278              	.LCFI49:
 1279              		.cfi_def_cfa_register 13
 1280              		@ sp needed
 1281 0048 80BD     		pop	{r7, pc}
 1282              		.cfi_endproc
 1283              	.LFE74:
 1285              		.section	.text.sd_card_receive_cmd_response,"ax",%progbits
 1286              		.align	1
 1287              		.global	sd_card_receive_cmd_response
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 28


 1288              		.syntax unified
 1289              		.thumb
 1290              		.thumb_func
 1292              	sd_card_receive_cmd_response:
 1293              	.LFB75:
 259:External/SDCard_Driver/Src/sdcard_driver.c **** 
 260:External/SDCard_Driver/Src/sdcard_driver.c **** HAL_StatusTypeDef sd_card_receive_cmd_response(
 261:External/SDCard_Driver/Src/sdcard_driver.c **** 	SPI_HandleTypeDef *hspi, 
 262:External/SDCard_Driver/Src/sdcard_driver.c **** 	uint8_t* response, 
 263:External/SDCard_Driver/Src/sdcard_driver.c **** 	uint8_t response_size, 
 264:External/SDCard_Driver/Src/sdcard_driver.c **** 	uint32_t timeout
 265:External/SDCard_Driver/Src/sdcard_driver.c **** )
 266:External/SDCard_Driver/Src/sdcard_driver.c **** {
 1294              		.loc 1 266 1
 1295              		.cfi_startproc
 1296              		@ args = 0, pretend = 0, frame = 24
 1297              		@ frame_needed = 1, uses_anonymous_args = 0
 1298 0000 80B5     		push	{r7, lr}
 1299              	.LCFI50:
 1300              		.cfi_def_cfa_offset 8
 1301              		.cfi_offset 7, -8
 1302              		.cfi_offset 14, -4
 1303 0002 86B0     		sub	sp, sp, #24
 1304              	.LCFI51:
 1305              		.cfi_def_cfa_offset 32
 1306 0004 00AF     		add	r7, sp, #0
 1307              	.LCFI52:
 1308              		.cfi_def_cfa_register 7
 1309 0006 F860     		str	r0, [r7, #12]
 1310 0008 B960     		str	r1, [r7, #8]
 1311 000a 3B60     		str	r3, [r7]
 1312 000c 1346     		mov	r3, r2
 1313 000e FB71     		strb	r3, [r7, #7]
 267:External/SDCard_Driver/Src/sdcard_driver.c **** 	sd_card_r1_response r1 = 0;
 1314              		.loc 1 267 22
 1315 0010 0023     		movs	r3, #0
 1316 0012 BB75     		strb	r3, [r7, #22]
 268:External/SDCard_Driver/Src/sdcard_driver.c ****   // Max length of cmd response - 5 bytes 
 269:External/SDCard_Driver/Src/sdcard_driver.c ****   // (excluding starting r1)
 270:External/SDCard_Driver/Src/sdcard_driver.c **** 	uint8_t buffer[5] = { 0 };
 1317              		.loc 1 270 10
 1318 0014 0023     		movs	r3, #0
 1319 0016 3B61     		str	r3, [r7, #16]
 1320 0018 0023     		movs	r3, #0
 1321 001a 3B75     		strb	r3, [r7, #20]
 271:External/SDCard_Driver/Src/sdcard_driver.c **** 	
 272:External/SDCard_Driver/Src/sdcard_driver.c **** 	// First we receive the first byte - r1
 273:External/SDCard_Driver/Src/sdcard_driver.c ****   HAL_StatusTypeDef status = sd_card_wait_response(hspi, buffer);
 1322              		.loc 1 273 30
 1323 001c 07F11003 		add	r3, r7, #16
 1324 0020 1946     		mov	r1, r3
 1325 0022 F868     		ldr	r0, [r7, #12]
 1326 0024 FFF7FEFF 		bl	sd_card_wait_response
 1327 0028 0346     		mov	r3, r0
 1328 002a FB75     		strb	r3, [r7, #23]
 274:External/SDCard_Driver/Src/sdcard_driver.c **** 	status |= sd_card_receive_byte(hspi, &r1);
 1329              		.loc 1 274 12
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 29


 1330 002c 07F11603 		add	r3, r7, #22
 1331 0030 1946     		mov	r1, r3
 1332 0032 F868     		ldr	r0, [r7, #12]
 1333 0034 FFF7FEFF 		bl	sd_card_receive_byte
 1334 0038 0346     		mov	r3, r0
 1335 003a 1A46     		mov	r2, r3
 1336              		.loc 1 274 9
 1337 003c FB7D     		ldrb	r3, [r7, #23]
 1338 003e 1343     		orrs	r3, r3, r2
 1339 0040 FB75     		strb	r3, [r7, #23]
 275:External/SDCard_Driver/Src/sdcard_driver.c **** 	*response = r1;
 1340              		.loc 1 275 12
 1341 0042 BA7D     		ldrb	r2, [r7, #22]	@ zero_extendqisi2
 1342 0044 BB68     		ldr	r3, [r7, #8]
 1343 0046 1A70     		strb	r2, [r3]
 276:External/SDCard_Driver/Src/sdcard_driver.c **** 	
 277:External/SDCard_Driver/Src/sdcard_driver.c **** 	// if (r1 || status)
 278:External/SDCard_Driver/Src/sdcard_driver.c **** 	// 	return HAL_ERROR;
 279:External/SDCard_Driver/Src/sdcard_driver.c **** 
 280:External/SDCard_Driver/Src/sdcard_driver.c ****   if (status)
 1344              		.loc 1 280 6
 1345 0048 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 1346 004a 002B     		cmp	r3, #0
 1347 004c 01D0     		beq	.L74
 281:External/SDCard_Driver/Src/sdcard_driver.c **** 		return status;
 1348              		.loc 1 281 10
 1349 004e FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 1350 0050 18E0     		b	.L77
 1351              	.L74:
 282:External/SDCard_Driver/Src/sdcard_driver.c **** 	
 283:External/SDCard_Driver/Src/sdcard_driver.c **** 	// If there are no errors, then we can continue to receive data
 284:External/SDCard_Driver/Src/sdcard_driver.c **** 	if (response_size > 1)
 1352              		.loc 1 284 5
 1353 0052 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1354 0054 012B     		cmp	r3, #1
 1355 0056 14D9     		bls	.L76
 285:External/SDCard_Driver/Src/sdcard_driver.c **** 	{
 286:External/SDCard_Driver/Src/sdcard_driver.c **** 		// status = HAL_SPI_Receive(
 287:External/SDCard_Driver/Src/sdcard_driver.c **** 		// 	hspi, (uint8_t*)buffer, response_size - 1, timeout
 288:External/SDCard_Driver/Src/sdcard_driver.c **** 		// );
 289:External/SDCard_Driver/Src/sdcard_driver.c ****     status = sd_card_receive_bytes(
 1356              		.loc 1 289 14
 1357 0058 FB79     		ldrb	r3, [r7, #7]
 1358 005a 013B     		subs	r3, r3, #1
 1359 005c DAB2     		uxtb	r2, r3
 1360 005e 07F11003 		add	r3, r7, #16
 1361 0062 1946     		mov	r1, r3
 1362 0064 F868     		ldr	r0, [r7, #12]
 1363 0066 FFF7FEFF 		bl	sd_card_receive_bytes
 1364 006a 0346     		mov	r3, r0
 1365 006c FB75     		strb	r3, [r7, #23]
 290:External/SDCard_Driver/Src/sdcard_driver.c **** 			hspi, (uint8_t*)buffer, response_size - 1
 291:External/SDCard_Driver/Src/sdcard_driver.c **** 		);
 292:External/SDCard_Driver/Src/sdcard_driver.c **** 	
 293:External/SDCard_Driver/Src/sdcard_driver.c **** 		memcpy(response + 1, buffer, response_size - 1);
 1366              		.loc 1 293 19
 1367 006e BB68     		ldr	r3, [r7, #8]
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 30


 1368 0070 581C     		adds	r0, r3, #1
 1369              		.loc 1 293 46
 1370 0072 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1371 0074 013B     		subs	r3, r3, #1
 1372              		.loc 1 293 3
 1373 0076 1A46     		mov	r2, r3
 1374 0078 07F11003 		add	r3, r7, #16
 1375 007c 1946     		mov	r1, r3
 1376 007e FFF7FEFF 		bl	memcpy
 1377              	.L76:
 294:External/SDCard_Driver/Src/sdcard_driver.c **** 	}
 295:External/SDCard_Driver/Src/sdcard_driver.c **** 	
 296:External/SDCard_Driver/Src/sdcard_driver.c **** 	return status;
 1378              		.loc 1 296 9
 1379 0082 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 1380              	.L77:
 297:External/SDCard_Driver/Src/sdcard_driver.c **** }
 1381              		.loc 1 297 1 discriminator 1
 1382 0084 1846     		mov	r0, r3
 1383 0086 1837     		adds	r7, r7, #24
 1384              	.LCFI53:
 1385              		.cfi_def_cfa_offset 8
 1386 0088 BD46     		mov	sp, r7
 1387              	.LCFI54:
 1388              		.cfi_def_cfa_register 13
 1389              		@ sp needed
 1390 008a 80BD     		pop	{r7, pc}
 1391              		.cfi_endproc
 1392              	.LFE75:
 1394              		.section	.bss.sd_card_is_spi_mode.0,"aw",%nobits
 1397              	sd_card_is_spi_mode.0:
 1398 0000 00       		.space	1
 1399              		.text
 1400              	.Letext0:
 1401              		.file 2 "d:\\portable programs\\stm32-my-toolchain\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\
 1402              		.file 3 "d:\\portable programs\\stm32-my-toolchain\\gcc-arm-none-eabi-10.3-2021.10\\arm-none-eabi\
 1403              		.file 4 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 1404              		.file 5 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 1405              		.file 6 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_gpio.h"
 1406              		.file 7 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 1407              		.file 8 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_spi.h"
 1408              		.file 9 "External/SDCard_Driver/Inc/sdcard_driver.h"
 1409              		.file 10 "External/CRC/Inc/crc-buffer.h"
ARM GAS  C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s 			page 31


DEFINED SYMBOLS
                            *ABS*:00000000 sdcard_driver.c
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:22     .bss.sd_status:00000000 sd_status
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:19     .bss.sd_status:00000000 $d
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:25     .text.sd_card_power_on:00000000 $t
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:31     .text.sd_card_power_on:00000000 sd_card_power_on
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:1005   .text.sd_card_receive_byte:00000000 sd_card_receive_byte
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:99     .text.sd_card_power_on:00000050 $d
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:104    .text.sd_card_enter_spi_mode:00000000 $t
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:110    .text.sd_card_enter_spi_mode:00000000 sd_card_enter_spi_mode
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:896    .text.sd_card_get_cmd:00000000 sd_card_get_cmd
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:237    .text.sd_card_enter_spi_mode:000000bc $d
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:1397   .bss.sd_card_is_spi_mode.0:00000000 sd_card_is_spi_mode.0
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:243    .text.sd_card_v1_init_process:00000000 $t
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:249    .text.sd_card_v1_init_process:00000000 sd_card_v1_init_process
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:1292   .text.sd_card_receive_cmd_response:00000000 sd_card_receive_cmd_response
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:463    .text.sd_card_v1_init_process:000001a4 $d
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:469    .text.sd_card_v2_init_process:00000000 $t
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:475    .text.sd_card_v2_init_process:00000000 sd_card_v2_init_process
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:727    .text.sd_card_v2_init_process:000001fc $d
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:733    .text.sd_card_reset:00000000 $t
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:739    .text.sd_card_reset:00000000 sd_card_reset
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:884    .text.sd_card_reset:000000e4 $d
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:890    .text.sd_card_get_cmd:00000000 $t
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:999    .text.sd_card_receive_byte:00000000 $t
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:1050   .text.sd_card_receive_bytes:00000000 $t
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:1056   .text.sd_card_receive_bytes:00000000 sd_card_receive_bytes
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:1127   .text.sd_card_transmit_bytes:00000000 $t
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:1133   .text.sd_card_transmit_bytes:00000000 sd_card_transmit_bytes
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:1210   .text.sd_card_wait_response:00000000 $t
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:1216   .text.sd_card_wait_response:00000000 sd_card_wait_response
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:1286   .text.sd_card_receive_cmd_response:00000000 $t
C:\Users\Matvey\AppData\Local\Temp\cc58SwQr.s:1398   .bss.sd_card_is_spi_mode.0:00000000 $d

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
HAL_SPI_Transmit
HAL_GetTick
crc_buffer_calculate_crc_7
HAL_SPI_TransmitReceive
memcpy
